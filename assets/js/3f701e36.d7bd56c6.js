"use strict";(self.webpackChunkwjftu_ds=self.webpackChunkwjftu_ds||[]).push([[3e3],{5690:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>l,frontMatter:()=>i,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"springboot/data/jdbc","title":"JDBC","description":"\u9996\u5148\u5f15\u5165\u4f9d\u8d56","source":"@site/note/springboot/data/jdbc.md","sourceDirName":"springboot/data","slug":"/springboot/data/jdbc","permalink":"/note/springboot/data/jdbc","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"JDBC","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"\u4f7f\u7528\u6570\u636e","permalink":"/note/springboot/data/"},"next":{"title":"\u52a8\u6001\u914d\u7f6e\u591a\u6570\u636e\u6e90","permalink":"/note/springboot/data/dynamic-datasource"}}');var s=t(4848),a=t(8453);const i={title:"JDBC",sidebar_position:1},o=void 0,d={},p=[];function c(e){const n={code:"code",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"\u9996\u5148\u5f15\u5165\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-data-jdbc</artifactId>\n</dependency>\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5b83\u95f4\u63a5\u4f9d\u8d56\u4e86 Hikari \u6570\u636e\u5e93\u8fde\u63a5\u6c60\uff0c JDBC \u548c\u8d1f\u8d23\u4e8b\u7269\u7684 spring-tx"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>com.zaxxer</groupId>\n    <artifactId>HikariCP</artifactId>\n    <version>4.0.3</version>\n    <scope>compile</scope>\n</dependency>\n\n<dependency>\n    <groupId>org.springframework</groupId>\n    <artifactId>spring-jdbc</artifactId>\n    <version>5.3.16</version>\n    <scope>compile</scope>\n</dependency>\n\n<dependency>\n    <groupId>org.springframework</groupId>\n    <artifactId>spring-tx</artifactId>\n    <version>5.3.16</version>\n    <scope>compile</scope>\n</dependency>\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5b9e\u4f53\u7c7b\u5b9e\u73b0 RowMapper \u63a5\u53e3\uff0c\u91cd\u5199 mapRow \u65b9\u6cd5\uff0c\u5b9a\u4e49\u5b57\u6bb5\u7684\u6620\u5c04\u5173\u7cfb"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'import lombok.Data;\nimport org.springframework.jdbc.core.RowMapper;\n\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n@Data\npublic class User implements RowMapper<User> {\n    Long id;\n    String username;\n    Integer age;\n\n    @Override\n    public User mapRow(ResultSet rs, int rowNum) throws SQLException {\n        User user=new User();\n        user.setId(rs.getLong("id"));\n        user.setUsername(rs.getString("username"));\n        user.setAge(rs.getInt("age"));\n        return user;\n    }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u5728 repository \u4e2d\u6ce8\u5165 JdbcTemplate \uff0c\u5373\u53ef\u4f7f\u7528 JdbcTemplate \u8fdb\u884c\u589e\u5220\u6539\u67e5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@Repository\npublic class UserRepository {\n    \n    JdbcTemplate jdbcTemplate;\n\n    @Autowired\n    public UserRepository(JdbcTemplate jdbcTemplate){\n        this.jdbcTemplate = jdbcTemplate;\n    }\n\n    public List<User> findById(Long id){\n        String sql = "select id, username, age from jdbc_user where id=?";\n        List<User> list = jdbcTemplate.query(sql, new User(), new Object[]{id});\n        return list;\n\n    }\n\n    public List<User> findAll(){\n        String sql = "select id, username, age from jdbc_user limit 1000";\n        List<User> list = jdbcTemplate.query(sql, new BeanPropertyRowMapper<>(User.class));\n        return list;\n    }\n\n    public int insert(String username, Integer age){\n        String sql = "insert into jdbc_user(username, age) values(?,?)";\n        int update = jdbcTemplate.update(sql, username, age);\n        return update;\n    }\n\n    public int update(Long id, String username, Integer age){\n        String sql = "update jdbc_user set username = ?, age = ? where id = ?";\n        int update = jdbcTemplate.update(sql, username, age, id);\n        return update;\n    }\n\n    public int delete(Long id){\n        String sql = "delete from jdbc_user where id = ?";\n        int update = jdbcTemplate.update(sql, id);\n        return update;\n    }\n}\n'})})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var r=t(6540);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);