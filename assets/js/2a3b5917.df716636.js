"use strict";(self.webpackChunkwjftu_ds=self.webpackChunkwjftu_ds||[]).push([[9897],{8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var t=r(6540);const i={},s=t.createContext(i);function a(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:n},e.children)}},9926:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"springboot/web/springdoc","title":"Springdoc","description":"SpringDoc \u662f\u4e00\u4e2a\u7528\u4e8e\u81ea\u52a8\u751f\u6210 OpenAPI 3.0\uff08Swagger\uff09\u6587\u6863 \u7684 Java \u5e93\uff0c\u4e13\u4e3a Spring Boot \u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u3002\u5b83\u7b80\u5316\u4e86 RESTful API \u7684\u6587\u6863\u5316\u8fc7\u7a0b\uff0c\u901a\u8fc7\u626b\u63cf Spring \u7684\u6ce8\u89e3\uff08\u5982 @RestController\u3001@GetMapping \u7b49\uff09\u81ea\u52a8\u751f\u6210\u4ea4\u4e92\u5f0f API \u6587\u6863\uff0c\u5e76\u63d0\u4f9b Swagger UI \u754c\u9762\u4f9b\u5f00\u53d1\u8005\u6d4b\u8bd5\u63a5\u53e3\u3002","source":"@site/note/springboot/web/springdoc.md","sourceDirName":"springboot/web","slug":"/springboot/web/springdoc","permalink":"/note/springboot/web/springdoc","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Spring Boot Security","permalink":"/note/springboot/web/security"},"next":{"title":"\u8bbe\u8ba1\u6a21\u5f0f","permalink":"/note/designPattern/"}}');var i=r(4848),s=r(8453);const a={},o="Springdoc",c={},l=[];function p(e){const n={a:"a",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"springdoc",children:"Springdoc"})}),"\n",(0,i.jsx)(n.p,{children:"SpringDoc \u662f\u4e00\u4e2a\u7528\u4e8e\u81ea\u52a8\u751f\u6210 OpenAPI 3.0\uff08Swagger\uff09\u6587\u6863 \u7684 Java \u5e93\uff0c\u4e13\u4e3a Spring Boot \u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u3002\u5b83\u7b80\u5316\u4e86 RESTful API \u7684\u6587\u6863\u5316\u8fc7\u7a0b\uff0c\u901a\u8fc7\u626b\u63cf Spring \u7684\u6ce8\u89e3\uff08\u5982 @RestController\u3001@GetMapping \u7b49\uff09\u81ea\u52a8\u751f\u6210\u4ea4\u4e92\u5f0f API \u6587\u6863\uff0c\u5e76\u63d0\u4f9b Swagger UI \u754c\u9762\u4f9b\u5f00\u53d1\u8005\u6d4b\u8bd5\u63a5\u53e3\u3002"}),"\n",(0,i.jsx)(n.p,{children:"Springdoc \u4e0e Spring Boot \u7684\u7248\u672c\u517c\u5bb9\u6027\uff1a"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Spring Boot Versions"}),(0,i.jsx)(n.th,{children:"Springdoc OpenAPI Versions"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"3.4"}),(0,i.jsx)(n.td,{children:"2.7-2.8"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"3.3"}),(0,i.jsx)(n.td,{children:"2.6"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"3.2"}),(0,i.jsx)(n.td,{children:"2.3-2.5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"3.1"}),(0,i.jsx)(n.td,{children:"2.2"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"3.0"}),(0,i.jsx)(n.td,{children:"2.0-2.1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"2.7 1.5"}),(0,i.jsx)(n.td,{children:"1.6"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"\u5f15\u5165\u4f9d\u8d56"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"dependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-validation'\n    implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.6.0'\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5e38\u7528\u914d\u7f6e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Change Swagger UI path (default is /swagger-ui.html)\nspringdoc.swagger-ui.path=/swagger-ui.html\n\n# Change OpenAPI spec path (default is /v3/api-docs)\nspringdoc.api-docs.path=/v3/api-docs\n\n# Enable or disable Swagger UI\nspringdoc.swagger-ui.enabled=true\n\n# Enable or disable OpenAPI docs endpoint\nspringdoc.api-docs.enabled=true\n\n# Show duration of each request\nspringdoc.swagger-ui.display-request-duration=true\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u542f\u52a8\u540e\u8bbf\u95ee ",(0,i.jsx)(n.a,{href:"http://localhost:8080/swagger-ui/index.html",children:"http://localhost:8080/swagger-ui/index.html"})," \uff0c\u5373\u53ef\u770b\u5230 swagger \u7684 ui"]}),"\n",(0,i.jsx)(n.p,{children:"\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u4e00\u4e2a OpenAPI bean \uff0c\u4fee\u6539 ui \u7684\u4e00\u4e9b metadata"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Configuration\npublic class SpringdocConfig {\n    @Bean\n    public OpenAPI customOpenAPI() {\n        return new OpenAPI()\n            .info(new Info()\n                .title("Springdoc Demo")\n                .version("1.0")\n                .description("SpringDoc Demo Application")\n                .contact(new Contact()\n                    .name("Jeff Wang")\n                    .email("your@email.com")));\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u521b\u5efa\u4e00\u4e2a Controller \uff0c\u542f\u52a8\u5e94\u7528\uff0c\u53ef\u4ee5\u5728 ui \u4e0a\u70b9\u51fb try it out \u8fdb\u884c\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u8f93\u5165\u53c2\u6570 name \u8fdb\u884c\u6d4b\u8bd5"}),"\n",(0,i.jsx)(n.p,{children:"@Operation @Parameter \u53ef\u4ee5\u914d\u7f6e\u63a5\u53e3\u548c\u53c2\u6570\u7684 metadata"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@RestController\n@RequestMapping("/api")\npublic class HelloController {\n\n    @GetMapping("/hello")\n    @Operation(summary = "Say Hello", description = "Returns a greeting message.")\n    public String hello(\n        @Parameter(description = "Name of the person to greet")\n        @RequestParam(defaultValue = "World") String name) {\n        return "Hello, " + name + "!";\n    }\n}\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"ui \u4e0a\u4f1a\u663e\u793a\u5bf9\u5e94\u7684 curl \u547d\u4ee4"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"curl -X 'GET' \\\n  'http://localhost:8080/api/hello?name=world' \\\n  -H 'accept: */*'\n"})}),"\n",(0,i.jsx)(n.p,{children:"Controller \u65b0\u589e\u8fd4\u56de DTO"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@GetMapping("/greet")\n@Operation(summary = "Greet user with structured response")\npublic GreetingResponse greet(@RequestParam String name) {\n    return new GreetingResponse("Hello, " + name + "!");\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"@Schema \u53ef\u4ee5\u6807\u6ce8 DTO \uff0cui \u4e0a\u4f1a\u663e\u793a\u5bf9 Schema \u7684\u63cf\u8ff0"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Schema(description = "Greeting response")\npublic class GreetingResponse {\n\n    @Schema(description = "Greeting message", example = "Hello, John!")\n    private String message;\n\n    public GreetingResponse(String message) {\n        this.message = message;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u4e0e Spring Security \u4e00\u8d77\u4f7f\u7528"}),"\n",(0,i.jsx)(n.p,{children:"\u5728 Spring Security \u4e2d\u914d\u7f6e http basic \uff0c\u5e76\u653e\u884c swagger ui \uff0c\u9700\u8981\u653e\u884c /v3/api-docs/** \u4e0d\u7136 ui \u4e5f\u6253\u4e0d\u5f00"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Configuration\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n            .csrf(csrf -> csrf.disable())\n            .authorizeHttpRequests(auth -> auth\n                .requestMatchers("/api/public", "/swagger-ui/**", "/v3/api-docs/**").permitAll()\n                .anyRequest().authenticated()\n            )\n            .httpBasic(Customizer.withDefaults()); // HTTP Basic Auth\n\n        return http.build();\n    }\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        UserDetails user = User.withUsername("user")\n            .password("{noop}password") // Use PasswordEncoder in production\n            .roles("USER")\n            .build();\n\n        return new InMemoryUserDetailsManager(user);\n    }\n}\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u914d\u7f6e Springdoc \u652f\u6301 http basic \u9274\u6743\uff0c\u5728 ui \u53f3\u4e0a\u89d2\u4f1a\u6709 authorize \u6309\u94ae"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Bean\npublic OpenAPI customOpenAPI() {\n    return new OpenAPI()\n        .info(new Info().title("Demo API").version("1.0"))\n        .components(new Components()\n            .addSecuritySchemes("basic-auth",\n                new SecurityScheme()\n                    .type(SecurityScheme.Type.HTTP)\n                    .scheme("basic")))\n        .addSecurityItem(new SecurityRequirement().addList("basic-auth"));\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"authorize \u540e\u8bf7\u6c42\u4f1a\u5e26\u4e0a Authorization"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"curl -X 'GET' \\\n  'http://localhost:8080/api/hello?name=World' \\\n  -H 'accept: */*' \\\n  -H 'Authorization: Basic dXNlcjpwYXNzd29yZA=='\n"})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}}}]);