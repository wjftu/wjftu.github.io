"use strict";(self.webpackChunkwjftu_ds=self.webpackChunkwjftu_ds||[]).push([[8011],{5768:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>l,toc:()=>i});const l=JSON.parse('{"id":"tool/oracle","title":"Oracle","description":"\u767b\u5f55\u6570\u636e\u5e93","source":"@site/note/tool/oracle.md","sourceDirName":"tool","slug":"/tool/oracle","permalink":"/note/tool/oracle","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"title":"Oracle","sidebar_position":30},"sidebar":"tutorialSidebar","previous":{"title":"Gradle","permalink":"/note/tool/gradle"},"next":{"title":"Kafka","permalink":"/note/tool/kafka"}}');var s=a(4848),r=a(8453);const c={title:"Oracle",sidebar_position:30},t="Oracle",d={},i=[{value:"\u767b\u5f55\u6570\u636e\u5e93",id:"\u767b\u5f55\u6570\u636e\u5e93",level:3},{value:"\u6570\u636e\u7c7b\u578b",id:"\u6570\u636e\u7c7b\u578b",level:3},{value:"\u8868\u548c\u6570\u636e\u64cd\u4f5c",id:"\u8868\u548c\u6570\u636e\u64cd\u4f5c",level:3},{value:"\u51fd\u6570",id:"\u51fd\u6570",level:3},{value:"\u5bfc\u5165\u5bfc\u51fa",id:"\u5bfc\u5165\u5bfc\u51fa",level:3}];function o(e){const n={br:"br",code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"oracle",children:"Oracle"})}),"\n",(0,s.jsx)(n.h3,{id:"\u767b\u5f55\u6570\u636e\u5e93",children:"\u767b\u5f55\u6570\u636e\u5e93"}),"\n",(0,s.jsx)(n.p,{children:"\u767b\u5f55\u6570\u636e\u5e93"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"sqlplus username/password@ip:port/name\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u679c\u88ab\u9501\u4e86\u767b\u5f55\u4e0d\u4e0a\uff0c\u53ef\u4ee5\u7528\u7ba1\u7406\u5458\u8d26\u6237\u89e3\u9501"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select LOCK_DATE,username from dba_users where username = 'MYUSERNAME';\nalter user MYUSERNAME account unlock;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u6570\u636e\u7c7b\u578b",children:"\u6570\u636e\u7c7b\u578b"}),"\n",(0,s.jsx)(n.p,{children:"\u5b57\u7b26\u578b\uff1a"}),"\n",(0,s.jsxs)(n.p,{children:["char \u957f\u5ea6\u56fa\u5b9a\u7684\u5b57\u7b26\u4e32\uff0cchar(10) \u8868\u793a\u6700\u957f 10 \u5b57\u8282\uff0c\u540e\u9762\u7528\u7a7a\u683c\u8865\u5168\uff0c\u67e5\u8be2\u901f\u5ea6\u5feb\uff0c\u9002\u5408\u957f\u5ea6\u56fa\u5b9a\u6216\u9891\u7e41\u67e5\u627e\u7684\u6570\u636e",(0,s.jsx)(n.br,{}),"\n","varchar2 \u957f\u5ea6\u53ef\u53d8\uff0cvarchar2(10) \u8868\u793a\u6700\u957f 10 \u5b57\u8282\uff0c\u7701\u7a7a\u95f4"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u9700\u8bbe\u7f6e\u5b57\u7b26\u957f\u5ea6\u800c\u4e0d\u662f\u5b57\u8282\u957f\u5ea6\uff0c\u9700\u8981\u7528 ",(0,s.jsx)(n.code,{children:"char"})," \uff0c\u4f8b\u5982 char(5 char) varchar2(10 char)"]}),"\n",(0,s.jsx)(n.p,{children:"\u6570\u5b57\u578b\uff1a"}),"\n",(0,s.jsxs)(n.p,{children:["number \u6574\u6570\u6216\u5c0f\u6570",(0,s.jsx)(n.br,{}),"\n","number(5) \u8868\u793a5\u4f4d\u6574\u6570\uff0c-99999 \u5230 99999",(0,s.jsx)(n.br,{}),"\n","number(5,2) \u8868\u793a 5 \u4f4d\u6709\u6548\u6570\uff0c\u5305\u62ec 2 \u4f4d\u5c0f\u6570\uff0c\u8303\u56f4 -999.99 \u5230 999.99"]}),"\n",(0,s.jsx)(n.p,{children:"\u65e5\u671f\u578b\uff1a"}),"\n",(0,s.jsxs)(n.p,{children:["date \u5e74\u6708\u65e5\u65f6\u5206\u79d2",(0,s.jsx)(n.br,{}),"\n","timestamp \u7cbe\u786e\u5230\u6beb\u79d2"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"to_date('1999-01-31 23:24:25','yyyy-mm-dd hh24:mi:ss') \nto_char(sysdate,'yyyy-mm-dd hh24:mi:ss')\nselect DATE '2023-07-07' from dual;\nselect timestamp '2024-09-05 16:04:59' from dual;\n"})}),"\n",(0,s.jsx)(n.p,{children:"Blob"}),"\n",(0,s.jsx)(n.p,{children:"blob \u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u6700\u5927 4 G"}),"\n",(0,s.jsx)(n.h3,{id:"\u8868\u548c\u6570\u636e\u64cd\u4f5c",children:"\u8868\u548c\u6570\u636e\u64cd\u4f5c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"create table tab_name (\n    column1 tpye1 constraint1,\n    column2 type2 constraint2\n)\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"create table tab_name (\n    id number generated by default as identity,\n    name varchar2(10) not null,\n    age number(3),\n    sex char(1),\n    weight number(7,2), \n    birthday date\n)\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6dfb\u52a0\u4e3b\u952e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"alter table tab_name add constraint tb_pk primary key (deptno);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6dfb\u52a0\u975e\u7a7a\u7ea6\u675f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"alter table tab_name modify  (col1 not null );\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4ece\u5176\u4ed6\u8868\u521b\u5efa\u8868"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"create table tab2 as select * from tab1;\ncreate table tab2 as select * from tab1 where id < 100;\ncreate table tab2 as select col1, col2 from tab1;\ncreate table tab3 as select col1, col2 from tab1, tab2;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5220\u9664\u8868"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u5220\u9664\u8868\u7ed3\u6784\u548c\u6570\u636e\ndrop table tab_name;\n-- \u4ec5\u5220\u9664\u6570\u636e\uff0c\u4fdd\u7559\u8868\u7ed3\u6784\ntruncate table tab_name;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u67e5\u770b\u8868\u7ed3\u6784"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"DESC tab_name;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6dfb\u52a0\u5b57\u6bb5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u6dfb\u52a0\u4e00\u5217\nalter table tab_name add col_name number(2);\n-- \u6dfb\u52a0\u591a\u5217\nalter table tab_name add(col1 number(5) not null, col2 varchar2(10));\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6dfb\u52a0\u5b57\u6bb5\u662f\u5426\u4f1a\u9501\u8868\uff1f\u5982\u679c\u8fd9\u4e2a\u5b57\u6bb5\u6ca1\u6709\u7ea6\u675f\uff0c\u6ca1\u6709\u9ed8\u8ba4\u503c\uff0c\u4e0d\u4f1a\u9501"}),"\n",(0,s.jsx)(n.p,{children:"\u4fee\u6539\u5b57\u6bb5\u957f\u5ea6\u6216\u7c7b\u578b\uff08\u4fee\u6539\u7c7b\u578b\u4e0d\u80fd\u6709\u6570\u636e\uff09"}),"\n",(0,s.jsx)(n.p,{children:"\u5b9e\u6d4b varchar2 \u6269\u957f\u662f\u77ac\u95f4\u7684\uff0c\u7f29\u77ed\u7b2c\u4e00\u6b21\u8f83\u6162\uff0c1 \u5343\u4e07\u6570\u636e 5 \u79d2\uff08\u4e0d\u80fd\u6709\u6570\u636e\u8d85\u957f\uff09\uff0c\u518d\u6b21\u7f29\u77ed\u5c31\u53ea\u6709\u96f6\u70b9\u51e0\u79d2\u3002varchar2 \u53ef\u4ee5\u8f6c nvarchar \uff0c1 \u5343\u4e07\u6570\u636e\u8017\u65f6 300 s\uff0c\u800c nvarchar \u65e0\u6cd5\u8f6c varchar2\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"alter table tab_name modify( col_name varchar2(5))\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5220\u9664\u5b57\u6bb5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"alter table tab_name drop column col_name;\nalter table tab_name drop (col1, col2);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"create table employee (\nid number(5),\nname varchar2(20),\nphone varchar2(10),\nsalary number(5),\nage number(2));\nalter table employee add constraint tb_pk primary key (id);\nalter table employee add email varchar2(255) not null;\nalter table employee modify salary number(5,2);\nalter table employee drop (age, phone);\nalter table employee rename  column name to full_name;\ndesc employee;\n\n\u540d\u79f0     \u7a7a\u503c?      \u7c7b\u578b            \n------ -------- ------------- \nID        NOT NULL NUMBER(5)     \nFULL_NAME          VARCHAR2(20)  \nSALARY             NUMBER(5,2)   \nEMAIL     NOT NULL VARCHAR2(255) \n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4fee\u6539\u8868\u540d rename"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"rename tab_name to tab_name_new\uff1b\nalter table tab_name rename to tab_name_new;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u590d\u5236\u8868"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"insert select"})," \u63d2\u5165\u6570\u636e\u975e\u5e38\u975e\u5e38\u5feb\uff0c\u6bd4\u76f4\u63a5\u7528\u4ee3\u7801\u6279\u91cf\u63d2\u5165\u5feb\u5f88\u591a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u590d\u5236\u8868\u7ed3\u6784\u548c\u6570\u636e\ncreate table tab_name as select * from tab_name_old;\n-- \u590d\u5236\u8868\u7ed3\u6784\ncreate table tab_name as select * from tab_name_old where 1=2;\n-- \u590d\u5236\u8868\u6570\u636e\uff08\u8868\u7ed3\u6784\u4e00\u6837\uff09\ninsert into tab_name select * from tab_name_old;\n-- \u590d\u5236\u8868\u6570\u636e\uff08\u8868\u7ed3\u6784\u4e0d\u4e00\u6837\uff09\ninsert into tab_name(col1, col2) select col1, col2 from tab_name_old;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5220\u9664\u8868"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"drop table tab_name\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u83b7\u53d6\u5220\u9664\u6240\u6709\u8868\u7684 sql"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT 'DROP table USERNAME.'||table_name||';'  FROM all_tables WHERE owner='USERNAME';\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u63d2\u5165\u6570\u636e"}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u679c\u6bcf\u5217\u90fd\u63d2\u5165\u6570\u636e\uff0c\u53ef\u4ee5\u4e0d\u6307\u5b9a\u5217\u540d\uff0c\u6309\u987a\u5e8f\u63d2\u5165\u3002\u5982\u679c\u6307\u5b9a\u5217\u540d\uff0c\u53ef\u4ee5\u63d2\u5165\u90e8\u5206\u5217"}),"\n",(0,s.jsx)(n.p,{children:"\u5728 oracle \u4e2d\uff0c\u7a7a\u5b57\u7b26\u4e32\u89c6\u4e3a null"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"insert into tab_name values('abc',1, null, 2.2);\ninsert into tab_name(name, age, weight) values('tom', 7, 11.1);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4fee\u6539\u6570\u636e"}),"\n",(0,s.jsx)(n.p,{children:"\u901a\u5e38\u9700\u8981\u7528 where \u8bed\u53e5\u6307\u5b9a\u4fee\u6539\u7684\u884c\uff0c\u4e0d\u7136\u5168\u90e8\u90fd\u4f1a\u88ab\u4fee\u6539"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"update tab_name set col1 = 'aaa', col2 = 11 where id = 1;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5220\u9664\u6570\u636e"}),"\n",(0,s.jsx)(n.p,{children:"\u901a\u5e38\u9700\u8981\u7528 where \u8bed\u53e5\u6307\u5b9a\u5220\u9664\u7684\u884c\uff0c\u4e0d\u7136\u5168\u90e8\u90fd\u4f1a\u88ab\u5220\u9664"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"delete from tab_name where id = 1;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u67e5\u8be2\u6570\u636e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from tab_name;\nselect col1, col2 from tab_name;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u67e5\u8be2\u6570\u636e\uff0c\u53bb\u9664\u91cd\u590d\u884c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select distinct col1, col2 from tab_name;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u7edf\u8ba1\u6570\u91cf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select count(*) from tab_name;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u53ef\u4ee5\u4f7f\u7528 where \u8fdb\u884c\u6761\u4ef6\u67e5\u8be2"}),"\n",(0,s.jsx)(n.p,{children:"\u53ef\u4ee5\u4f7f\u7528 like \u8fdb\u884c\u6a21\u7cca\u67e5\u8be2\uff0c% \u8868\u793a 0 \u4e2a\u6216\u591a\u4e2a\u4efb\u610f\u5b57\u7b26"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from tab_name where col1 = 1;\nselect * from tab_name where col1 is null;\nselect * from tab_name where col1 is not null;\nselect * from tab_name where col1 like '%abc%';\nselect * from tab_name where col1 in (1, 3, 5);\n"})}),"\n",(0,s.jsx)(n.p,{children:"dual \u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u8868\uff0c\u53ef\u4ee5\u7528\u4e8e\u67e5\u8be2\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u8868\u7684\u6570\u636e\u6216\u8ba1\u7b97\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select 1+2 from dual;\nselect sysdate from dual;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u67e5\u8be2\u65f6\u53ef\u4ee5\u4f7f\u7528\u522b\u540d"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select col1 col1_aliase from tab_name;\nselect col1 as col1_aliase from tab_name;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8868\u8fde\u63a5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u9ed8\u8ba4\u662f inner join\nselect tab1.col1, tab2.col2 from tab1 join tab2 on tab1.id = tab2.id;\n-- \u5185\u8fde\u63a5\uff08\u4e24\u4e2a\u8868\u5747\u4e0d\u542b\u4e3a null \u7684\u5217\uff09\nselect tab1.col1, tab2.col2 from tab1 inner join tab2 on tab1.id = tab2.id;\n-- \u5de6\u5916\u8fde\u63a5\uff08\u542b\u7b2c\u4e8c\u4e2a\u8868\u4e3a null \u7684\u5217\uff09\nselect tab1.col1, tab2.col2 from tab1 left join tab2 on tab1.id = tab2.id;\n-- \u53f3\u5916\u8fde\u63a5\uff08\u542b\u7b2c\u4e00\u4e2a\u8868\u4e3a null \u7684\u5217\uff09\nselect tab1.col1, tab2.col2 from tab1 right join tab2 on tab1.id = tab2.id;\n-- \u5168\u5916\u8fde\u63a5\uff08\u542b\u4e24\u4e2a\u8868\u4e3a null \u7684\u5217\uff09\nselect tab1.col1, tab2.col2 from tab1 full join tab2 on tab1.id = tab2.id;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4e8b\u52a1"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"commit"})," \u63d0\u4ea4\u4e8b\u52a1\uff0c ",(0,s.jsx)(n.code,{children:"savepoint"})," \u8bbe\u7f6e\u4fdd\u5b58\u70b9\uff0c ",(0,s.jsx)(n.code,{children:"rollback"})," \u56de\u6eda\u4e8b\u52a1"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u521b\u5efa\u4e00\u4e2a\u4fdd\u5b58\u70b9\nsavepoint s1;\nupdate tab_name set col1='aa' where col2='bb';\nsavepoint s2;\nupdate tab_name set col1='aaa' where col2='bb';\n-- \u56de\u6eda\u5230\u4fdd\u5b58\u70b9\nrollback to s2;\n-- \u56de\u6eda\u5168\u90e8\nrollback;\n-- \u63d0\u4ea4\u4e8b\u52a1\uff0c\uff08\u5e76\u5220\u9664\u6240\u6709\u4fdd\u5b58\u70b9\uff09\ncommit;\n"})}),"\n",(0,s.jsx)(n.p,{children:"merge \u8bed\u53e5"}),"\n",(0,s.jsx)(n.p,{children:"\u53ef\u7528\u4e8e\u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u6e90\u8868\u5408\u5e76"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"MERGE INTO target_table \nUSING source_table \nON search_condition\n    WHEN MATCHED THEN\n        UPDATE SET col1 = value1, col2 = value2,...\n        WHERE <update_condition>\n        [DELETE WHERE <delete_condition>]\n    WHEN NOT MATCHED THEN\n        INSERT (col1,col2,...)\n        values(value1,value2,...)\n        WHERE <insert_condition>;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u53ef\u4ee5\u7528 merge \u8bed\u53e5\u5b9e\u73b0 ",(0,s.jsx)(n.code,{children:"insert into on duplicate key update"})," \u8bed\u53e5\uff0c\u63d2\u5165\u6216\u66f4\u65b0\u6570\u636e"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"merge into tab_name m\nusing (select 1 as id from dual) n\non (m.id = n.id)\nwhen matched then\nupdate set name = 'abc'\nwhen not matched then\ninsert(id, name)  values(1, 'abc')\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5e8f\u5217"}),"\n",(0,s.jsx)(n.p,{children:"\u5f53\u9700\u8981\u4f7f\u7528\u81ea\u589e id \u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 oracle \u7684\u5e8f\u5217\u3002\u5728\u6bcf\u6b21\u63d2\u5165\u524d\u4ece\u5e8f\u5217\u83b7\u53d6\u4e0b\u4e00\u4e2a\u503c\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"create sequence seq_name\nincrement by n --\u9012\u589e\uff0c\u9ed8\u8ba41\nstart with n --\u5f00\u59cb\u503c\uff0c\u9ed8\u8ba41\nmaxvalue n | nomaxvalue --\u6700\u5927\u503c\uff0c\u9ed8\u8ba49999999999999999999999999999\nminvalue n | nominvalue --\u6700\u5c0f\u503c\uff0c\u9ed8\u8ba41\ncycle      | nocycle --\u662f\u5426\u5faa\u73af\uff0c\u9ed8\u8ba4nocycle\ncache n    | nocache --\u7f13\u5b58\uff0c\u9ed8\u8ba420\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u521b\u5efa\u9ed8\u8ba4\u5e8f\u5217\nCREATE SEQUENCE seq_name;\n-- \u521b\u5efa\u5e8f\u5217\nCREATE SEQUENCE seq_name INCREMENT BY 1 START WITH 1 MAXVALUE 999999999999999999999999999 CACHE 10 ORDER NOCYCLE;\n-- \u521b\u5efa\u5faa\u73af\u5e8f\u5217\ncreate sequence seq_name start with 1 increment by 1 maxvalue 5 minvalue 1 cycle nocache;\n-- \u8bfb\u53d6\u4e0b\u4e00\u4e2a\u503c\nselect seq_name.nextval from dual;\n-- \u8bfb\u53d6\u5f53\u524d\u503c\nselect seq_name.currval from dual;\n-- \u5220\u9664\u5e8f\u5217\ndrop sequence seq_name;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u53ef\u4ee5\u901a\u8fc7 trigger \u5b9e\u73b0\u81ea\u52a8\u4f7f\u7528\u5e8f\u5217"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TRIGGER tab_name_id_trigger BEFORE INSERT ON tab_name FOR EACH ROW \nBEGIN \nSELECT tab_name_seq.NEXTVAL INTO :NEW.ID FROM DUAL;\nEND;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u83b7\u53d6\u5efa\u5e8f\u5217\u8bed\u53e5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT 'drop SEQUENCE '||SEQUENCE_NAME|| ';CREATE SEQUENCE '||SEQUENCE_NAME|| ' INCREMENT BY '||INCREMENT_BY ||' START WITH '||LAST_NUMBER||' MAXVALUE '||MAX_VALUE ||' '||(case when CACHE_SIZE=0 then 'NOCACHE' else 'CACHE '||CACHE_SIZE end)||' ORDER NOCYCLE ;' FROM user_SEQUENCES;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u67e5\u8be2\u6240\u6709\u5e8f\u5217"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from user_sequences;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u7d22\u5f15"}),"\n",(0,s.jsx)(n.p,{children:"\u67e5\u770b\u6240\u6709\u7d22\u5f15"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from user_ind_columns;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u6709\u4e00\u4e9b\u7d22\u5f15\u5217\u4ee5 ",(0,s.jsx)(n.code,{children:"SYS_NC00"})," \u5f00\u5934\uff0c\u8fd9\u4e9b\u662f\u8f85\u7ec4\u5217"]}),"\n",(0,s.jsx)(n.p,{children:"\u521b\u5efa\u7d22\u5f15"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u521b\u5efa b-tree \u7d22\u5f15\ncreate index idx_name on tab_name(col);\n-- \u521b\u5efa\u4f4d\u56fe\u7d22\u5f15\ncreate bitmap index idx_name on tab_name(col);\n-- \u521b\u5efa\u591a\u5217\u7d22\u5f15\ncreate index idx_name on tab_name(col1, col2);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u67e5\u8be2\u7d22\u5f15\u4fe1\u606f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from user_indexes;\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8868\u7684\u7edf\u8ba1\u4fe1\u606f"}),"\n",(0,s.jsx)(n.p,{children:"all_tables user_tables \u542b\u6709\u8868\u7684\u7edf\u8ba1\u4fe1\u606f"}),"\n",(0,s.jsx)(n.p,{children:"\u6709\u4e00\u4e9b\u4fe1\u606f\u4e0d\u662f\u5b9e\u65f6\u7edf\u8ba1\u7684\uff0c\u53ef\u4ee5\u624b\u52a8\u8fdb\u884c\u7edf\u8ba1"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- \u7edf\u8ba1\nanalyze table tab_name compute statistics for table;\n-- \u83b7\u53d6\u6240\u6709\u8868\u7edf\u8ba1\u7684 sql\nselect 'analyze table ' || table_name || ' compute statistics for table;' from user_tables;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u51fd\u6570",children:"\u51fd\u6570"}),"\n",(0,s.jsx)(n.p,{children:"\u5b57\u7b26\u4e32\u5904\u7406\u51fd\u6570"}),"\n",(0,s.jsxs)(n.p,{children:["\u5b57\u7b26\u4e32\u62fc\u63a5\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"||"})," \uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"concat(str1, str2)"})," \uff0cconcat \u53ea\u80fd\u62fc 2 \u4e2a\u5b57\u7b26\u4e32\uff0c\u5982\u9700\u62fc\u591a\u4e2a\u9700\u8981\u53cd\u590d\u8c03\u7528"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5b57\u7b26\u4e32\u66ff\u6362 ",(0,s.jsx)(n.code,{children:"replace(src, str1, str2)"})," \u5c06 src \u4e2d\u7684 str1 \u66ff\u6362\u6210 str2"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5b57\u7b26\u4e32\u622a\u53d6 ",(0,s.jsx)(n.code,{children:"substr(string str, int a, int b)"})," \uff0c\u622a\u53d6 str \u4ece a \u5f00\u59cb\u957f\u5ea6\u4e3a b \u7684\u5b57\u7b26\u4e32\uff0c\u4e0b\u6807\u4ece 1 \u5f00\u59cb\uff0c \u5199 0 \u4e5f\u662f 1 \uff0c ",(0,s.jsx)(n.code,{children:"substr(string str, int a)"})," \u622a\u53d6\u4ece a \u5230\u672b\u5c3e"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u4e3a\u7a7a\u65f6\u53ef\u4ee5\u7528 ",(0,s.jsx)(n.code,{children:"nvl(str, replace_with)"})," \u51fd\u6570\u6307\u5b9a\u503c"]}),"\n",(0,s.jsxs)(n.p,{children:["\u83b7\u53d6\u5b57\u7b26\u4e32\u957f\u5ea6  ",(0,s.jsx)(n.code,{children:"length(str)"})," \u3002MySQL \u4e2d\u540c\u540d\u51fd\u6570\u8868\u793a\u7684\u662f\u5b57\u8282\u6570\uff0c",(0,s.jsx)(n.code,{children:"char_length(str)"})," \u624d\u662f\u5b57\u7b26\u6570"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select 'a' || 'b' from dual;  -- ab\nselect concat('ab', 'cd') from dual; -- abcd\nselect replace('abcd', 'b' ,'bb') from dual; -- abbcd\nselect substr('abcdefg', 2, 3) from dual; -- bcd\nselect substr('abcdefg', 2) from dual; -- bcdefg\nselect nvl(col1, 'aa') from dual; -- aa\nselect length('abc') from dual; -- 3\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u65f6\u95f4\u5904\u7406\u51fd\u6570"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"to_date(str, pattern)"})," \u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a date",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.code,{children:"to_char(date, pattern)"})," \u5c06 date \u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select to_date('2000-01-01 01:01:01', 'yyyy-mm-dd hh24:mi:ss') from dual;\nselect to_char(sysdate, 'yyyy-mm-dd hh24:mi:ss') from dual;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5bfc\u5165\u5bfc\u51fa",children:"\u5bfc\u5165\u5bfc\u51fa"}),"\n",(0,s.jsx)(n.p,{children:"\u53ef\u4ee5\u4f7f\u7528 exp \u548c imp \u8fdb\u884c\u5bfc\u5165\u5bfc\u51fa\uff0c\u65e0\u9700\u7ba1\u7406\u5458\u6743\u9650\uff0c\u4f46\u9700\u8981\u4e24\u4e2a\u6570\u636e\u5e93\u540c\u4e00\u4e2a\u7528\u6237\u540d"}),"\n",(0,s.jsx)(n.p,{children:"\u5bfc\u51fa\u8868"}),"\n",(0,s.jsxs)(n.p,{children:["rows \u662f\u5426\u5bfc\u51fa\u6570\u636e\uff0c\u9ed8\u8ba4 y \uff0c\u4e3a n \u5219\u53ea\u5bfc\u51fa\u8868\u7ed3\u6784",(0,s.jsx)(n.br,{}),"\n","file \u5bfc\u51fa\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4 expdat.dmp",(0,s.jsx)(n.br,{}),"\n","log \u65e5\u5fd7\u6587\u4ef6",(0,s.jsx)(n.br,{}),"\n","buffer \u7f13\u51b2\u533a\u5b57\u8282\u5927\u5c0f",(0,s.jsx)(n.br,{}),"\n","tables \u9700\u8981\u5bfc\u51fa\u7684\u8868\uff0c\u9017\u53f7\u5206\u9694",(0,s.jsx)(n.br,{}),"\n","indexes \u662f\u5426\u5bfc\u51fa\u7d22\u5f15\uff0c\u9ed8\u8ba4 y"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"exp user/password@ip1:1521/db1 file=/path/to/expdat.dmp log=/path/to/exp.log tables=table1,table2 rows=n indexes=y buffer=1000000 \n"})}),"\n",(0,s.jsxs)(n.p,{children:["rows \u662f\u5426\u5bfc\u51fa\u6570\u636e\uff0c\u9ed8\u8ba4 y \uff0c\u4e3a n \u5219\u53ea\u5bfc\u51fa\u8868\u7ed3\u6784",(0,s.jsx)(n.br,{}),"\n","file \u5bfc\u5165\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4 expdat.dmp",(0,s.jsx)(n.br,{}),"\n","log \u65e5\u5fd7\u6587\u4ef6",(0,s.jsx)(n.br,{}),"\n","buffer \u7f13\u51b2\u533a\u5b57\u8282\u5927\u5c0f",(0,s.jsx)(n.br,{}),"\n","indexes \u662f\u5426\u5bfc\u51fa\u7d22\u5f15\uff0c\u9ed8\u8ba4 y\ncommit \u6bcf\u63d2\u5165\u4e00\u884c\u8fdb\u884c\u63d0\u4ea4\uff0c\u9ed8\u8ba4 n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"imp user/password@ip2:1521/db2 file=/path/to/expdat.dmp log=/path/to/imp.log commit=yes buffer=1000000 indexes=y\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u67e5\u770b\u5e2e\u52a9"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"> exp help=y\n\nExport: Release 19.0.0.0.0 - Production on Wed Oct 23 16:32:55 2024\nVersion 19.3.0.0.0\n\nKeyword    Description (Default)      Keyword      Description (Default)\n--------------------------------------------------------------------------\nUSERID     username/password          FULL         export entire file (N)\nBUFFER     size of data buffer        OWNER        list of owner usernames\nFILE       output files (EXPDAT.DMP)  TABLES       list of table names\nCOMPRESS   import into one extent (Y) RECORDLENGTH length of IO record\nGRANTS     export grants (Y)          INCTYPE      incremental export type\nINDEXES    export indexes (Y)         RECORD       track incr. export (Y)\nDIRECT     direct path (N)            TRIGGERS     export triggers (Y)\nLOG        log file of screen output  STATISTICS   analyze objects (ESTIMATE)\nROWS       export data rows (Y)       PARFILE      parameter filename\nCONSISTENT cross-table consistency(N) CONSTRAINTS  export constraints (Y)\n...\n\n> imp help=y\n...\nKeyword  Description (Default)       Keyword      Description (Default)\n--------------------------------------------------------------------------\nUSERID   username/password           FULL         import entire file (N)\nBUFFER   size of data buffer         FROMUSER     list of owner usernames\nFILE     input files (EXPDAT.DMP)    TOUSER       list of usernames\nSHOW     just list file contents (N) TABLES       list of table names\nIGNORE   ignore create errors (N)    RECORDLENGTH length of IO record\nGRANTS   import grants (Y)           INCTYPE      incremental import type\nINDEXES  import indexes (Y)          COMMIT       commit array insert (N)\nROWS     import data rows (Y)        PARFILE      parameter filename\nLOG      log file of screen output   CONSTRAINTS  import constraints (Y)\n...\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>c,x:()=>t});var l=a(6540);const s={},r=l.createContext(s);function c(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);